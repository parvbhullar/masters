{"ast":null,"code":"var _jsxFileName = \"/home/sunny/PycharmProjects/master/frontend/src/App.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'antd/dist/antd.css';\nimport './App.css';\nimport { Table, Button } from 'antd';\nexport default class App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      products: [],\n      subCategories: [],\n      categories: [],\n      sortedInfo: null\n    };\n\n    this.handleChange = sorter => {\n      this.setState({\n        sortedInfo: sorter\n      });\n    };\n\n    this.clearAll = () => {\n      this.setState({\n        sortedInfo: null\n      });\n    };\n  }\n\n  componentDidMount() {\n    const apiUrl = 'http://127.0.0.1:8000/product_list/';\n    fetch(apiUrl).then(response => response.json()).then(data => this.setState({\n      products: data\n    }));\n    const apiUrl2 = 'http://127.0.0.1:8000/sub_category_list/';\n    fetch(apiUrl2).then(response => response.json()).then(data => this.setState({\n      subCategories: data\n    }));\n    const apiUrl3 = 'http://127.0.0.1:8000/category_list/';\n    fetch(apiUrl3).then(response => response.json()).then(data => this.setState({\n      categories: data\n    }));\n  }\n\n  render() {\n    let {\n      sortedInfo,\n      products,\n      categories,\n      subCategories\n    } = this.state;\n    console.log(products[0]);\n    let categoryFilter = [];\n    let subCategoryFilter = [];\n\n    if (categories) {\n      categories.map((item, key) => categoryFilter.push({\n        text: item.name,\n        value: item.name\n      }));\n    }\n\n    if (subCategories) {\n      subCategories.map((item, key) => subCategoryFilter.push({\n        text: item.name,\n        value: item.name\n      }));\n    }\n\n    sortedInfo = sortedInfo || {};\n    const columns = [{\n      title: 'Name',\n      dataIndex: 'name',\n      key: 'name',\n      sorter: (a, b) => a.name.toLowerCase() > b.name.toLowerCase(),\n      sortOrder: sortedInfo.columnKey === 'name' && sortedInfo.order\n    }, {\n      title: 'Sub Category',\n      render: data => data.sub_category.name,\n      key: 'sub_category',\n      filters: subCategoryFilter,\n      onFilter: (value, record) => record.sub_category.name.includes(value),\n      sorter: (a, b) => a.sub_category.name.length - b.sub_category.name.length,\n      sortOrder: sortedInfo.columnKey === 'sub_category' && sortedInfo.order\n    }, {\n      title: 'Category',\n      render: data => data.sub_category.category.name,\n      key: 'category',\n      filters: categoryFilter,\n      onFilter: (value, record) => record.sub_category.category.name.includes(value),\n      sorter: (a, b) => a.sub_category.category.name.length - b.sub_category.category.name.length,\n      sortOrder: sortedInfo.columnKey === 'category' && sortedInfo.order\n    }];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-operations\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: this.clearFilters,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    }, \"Clear Sorters\")), /*#__PURE__*/React.createElement(Table, {\n      columns: columns,\n      dataSource: products,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\nReactDOM.render( /*#__PURE__*/React.createElement(App, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 17\n  }\n}), document.getElementById('root'));","map":{"version":3,"sources":["/home/sunny/PycharmProjects/master/frontend/src/App.js"],"names":["React","ReactDOM","Table","Button","App","Component","state","products","subCategories","categories","sortedInfo","handleChange","sorter","setState","clearAll","componentDidMount","apiUrl","fetch","then","response","json","data","apiUrl2","apiUrl3","render","console","log","categoryFilter","subCategoryFilter","map","item","key","push","text","name","value","columns","title","dataIndex","a","b","toLowerCase","sortOrder","columnKey","order","sub_category","filters","onFilter","record","includes","length","category","clearFilters","document","getElementById"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAO,oBAAP;AACA,OAAO,WAAP;AAEA,SAASC,KAAT,EAAgBC,MAAhB,QAA8B,MAA9B;AAGA,eAAe,MAAMC,GAAN,SAAkBJ,KAAK,CAACK,SAAxB,CAAkC;AAAA;AAAA;AAAA,SAE/CC,KAF+C,GAEvC;AACNC,MAAAA,QAAQ,EAAG,EADL;AAENC,MAAAA,aAAa,EAAG,EAFV;AAGNC,MAAAA,UAAU,EAAG,EAHP;AAINC,MAAAA,UAAU,EAAE;AAJN,KAFuC;;AAAA,SAoC/CC,YApC+C,GAoC/BC,MAAD,IAAY;AACzB,WAAKC,QAAL,CAAc;AACZH,QAAAA,UAAU,EAAEE;AADA,OAAd;AAGD,KAxC8C;;AAAA,SA0C/CE,QA1C+C,GA0CpC,MAAM;AACf,WAAKD,QAAL,CAAc;AACZH,QAAAA,UAAU,EAAE;AADA,OAAd;AAGD,KA9C8C;AAAA;;AAS/CK,EAAAA,iBAAiB,GAAG;AAChB,UAAMC,MAAM,GAAG,qCAAf;AACAC,IAAAA,KAAK,CAACD,MAAD,CAAL,CACGE,IADH,CACSC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EADtB,EAEGF,IAFH,CAESG,IAAD,IACF,KAAKR,QAAL,CAAc;AACZN,MAAAA,QAAQ,EAAEc;AADE,KAAd,CAHN;AAOA,UAAMC,OAAO,GAAG,0CAAhB;AACAL,IAAAA,KAAK,CAACK,OAAD,CAAL,CACGJ,IADH,CACSC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EADtB,EAEGF,IAFH,CAESG,IAAD,IACF,KAAKR,QAAL,CAAc;AACZL,MAAAA,aAAa,EAAEa;AADH,KAAd,CAHN;AAOA,UAAME,OAAO,GAAG,sCAAhB;AACAN,IAAAA,KAAK,CAACM,OAAD,CAAL,CACGL,IADH,CACSC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EADtB,EAEGF,IAFH,CAESG,IAAD,IACF,KAAKR,QAAL,CAAc;AACZJ,MAAAA,UAAU,EAAEY;AADA,KAAd,CAHN;AAOH;;AAcDG,EAAAA,MAAM,GAAG;AACP,QAAI;AAAEd,MAAAA,UAAF;AAAcH,MAAAA,QAAd;AAAuBE,MAAAA,UAAvB;AAAkCD,MAAAA;AAAlC,QAAoD,KAAKF,KAA7D;AACAmB,IAAAA,OAAO,CAACC,GAAR,CAAYnB,QAAQ,CAAC,CAAD,CAApB;AAEA,QAAIoB,cAAc,GAAG,EAArB;AACA,QAAIC,iBAAiB,GAAG,EAAxB;;AAEA,QAAGnB,UAAH,EAAc;AACZA,MAAAA,UAAU,CAACoB,GAAX,CAAe,CAACC,IAAD,EAAOC,GAAP,KACbJ,cAAc,CAACK,IAAf,CACE;AAAEC,QAAAA,IAAI,EAAEH,IAAI,CAACI,IAAb;AAAoBC,QAAAA,KAAK,EAAEL,IAAI,CAACI;AAAhC,OADF,CADF;AAKD;;AAED,QAAG1B,aAAH,EAAiB;AACfA,MAAAA,aAAa,CAACqB,GAAd,CAAkB,CAACC,IAAD,EAAOC,GAAP,KAClBH,iBAAiB,CAACI,IAAlB,CACI;AAAEC,QAAAA,IAAI,EAAEH,IAAI,CAACI,IAAb;AAAoBC,QAAAA,KAAK,EAAEL,IAAI,CAACI;AAAhC,OADJ,CADA;AAKD;;AAGDxB,IAAAA,UAAU,GAAGA,UAAU,IAAI,EAA3B;AAEA,UAAM0B,OAAO,GAAG,CAAC;AACfC,MAAAA,KAAK,EAAE,MADQ;AAEfC,MAAAA,SAAS,EAAE,MAFI;AAGfP,MAAAA,GAAG,EAAE,MAHU;AAIfnB,MAAAA,MAAM,EAAE,CAAC2B,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACL,IAAF,CAAOO,WAAP,KAAuBD,CAAC,CAACN,IAAF,CAAOO,WAAP,EAJ1B;AAKfC,MAAAA,SAAS,EAAEhC,UAAU,CAACiC,SAAX,KAAyB,MAAzB,IAAmCjC,UAAU,CAACkC;AAL1C,KAAD,EAMZ;AACFP,MAAAA,KAAK,EAAE,cADL;AAEFb,MAAAA,MAAM,EAAGH,IAAD,IAAUA,IAAI,CAACwB,YAAL,CAAkBX,IAFlC;AAGFH,MAAAA,GAAG,EAAE,cAHH;AAIFe,MAAAA,OAAO,EAAElB,iBAJP;AAKFmB,MAAAA,QAAQ,EAAE,CAACZ,KAAD,EAAQa,MAAR,KAAmBA,MAAM,CAACH,YAAP,CAAoBX,IAApB,CAAyBe,QAAzB,CAAkCd,KAAlC,CAL3B;AAMFvB,MAAAA,MAAM,EAAE,CAAC2B,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACM,YAAF,CAAeX,IAAf,CAAoBgB,MAApB,GAA6BV,CAAC,CAACK,YAAF,CAAeX,IAAf,CAAoBgB,MANjE;AAOFR,MAAAA,SAAS,EAAEhC,UAAU,CAACiC,SAAX,KAAyB,cAAzB,IAA2CjC,UAAU,CAACkC;AAP/D,KANY,EAcd;AACAP,MAAAA,KAAK,EAAE,UADP;AAEAb,MAAAA,MAAM,EAAGH,IAAD,IAAUA,IAAI,CAACwB,YAAL,CAAkBM,QAAlB,CAA2BjB,IAF7C;AAGAH,MAAAA,GAAG,EAAE,UAHL;AAIAe,MAAAA,OAAO,EAAEnB,cAJT;AAKAoB,MAAAA,QAAQ,EAAE,CAACZ,KAAD,EAAQa,MAAR,KAAmBA,MAAM,CAACH,YAAP,CAAoBM,QAApB,CAA6BjB,IAA7B,CAAkCe,QAAlC,CAA2Cd,KAA3C,CAL7B;AAMAvB,MAAAA,MAAM,EAAE,CAAC2B,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACM,YAAF,CAAeM,QAAf,CAAwBjB,IAAxB,CAA6BgB,MAA7B,GAAsCV,CAAC,CAACK,YAAF,CAAeM,QAAf,CAAwBjB,IAAxB,CAA6BgB,MANrF;AAOAR,MAAAA,SAAS,EAAEhC,UAAU,CAACiC,SAAX,KAAyB,UAAzB,IAAuCjC,UAAU,CAACkC;AAP7D,KAdc,CAAhB;AAuBA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,KAAKQ,YAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,CADF,eAIE,oBAAC,KAAD;AAAO,MAAA,OAAO,EAAEhB,OAAhB;AAAyB,MAAA,UAAU,EAAE7B,QAArC;AAA+C,MAAA,QAAQ,EAAE,KAAKI,YAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,CADF;AAQD;;AAzG8C;AA4GjDV,QAAQ,CAACuB,MAAT,eAAgB,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAhB,EAAyB6B,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAzB","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'antd/dist/antd.css' \nimport './App.css';\n\nimport { Table, Button } from 'antd';\n\n\nexport default class App extends React.Component {\n\n  state = {\n    products : [],\n    subCategories : [],\n    categories : [],\n    sortedInfo: null,\n  }\n\n  componentDidMount() {\n      const apiUrl = 'http://127.0.0.1:8000/product_list/';\n      fetch(apiUrl)\n        .then((response) => response.json())\n        .then((data) => \n            this.setState({\n              products: data\n            })\n      );\n      const apiUrl2 = 'http://127.0.0.1:8000/sub_category_list/';\n      fetch(apiUrl2)\n        .then((response) => response.json())\n        .then((data) => \n            this.setState({\n              subCategories: data\n            })\n      );\n      const apiUrl3 = 'http://127.0.0.1:8000/category_list/';\n      fetch(apiUrl3)\n        .then((response) => response.json())\n        .then((data) => \n            this.setState({\n              categories: data\n            })\n      );\n  }\n\n  handleChange = (sorter) => {\n    this.setState({\n      sortedInfo: sorter,\n    });\n  }\n \n  clearAll = () => {\n    this.setState({\n      sortedInfo: null,\n    });\n  }\n  \n  render() {\n    let { sortedInfo, products,categories,subCategories } = this.state;\n    console.log(products[0]);\n\n    let categoryFilter = [];\n    let subCategoryFilter = [];\n\n    if(categories){\n      categories.map((item, key) =>\n        categoryFilter.push(\n          { text: item.name , value: item.name },\n        ),\n      );\n    }\n\n    if(subCategories){\n      subCategories.map((item, key) =>\n      subCategoryFilter.push(\n          { text: item.name , value: item.name },\n        ),\n      );\n    }\n\n\n    sortedInfo = sortedInfo || {};\n\n    const columns = [{\n      title: 'Name',\n      dataIndex: 'name',\n      key: 'name',\n      sorter: (a, b) => a.name.toLowerCase() > b.name.toLowerCase(),\n      sortOrder: sortedInfo.columnKey === 'name' && sortedInfo.order,\n    },  {\n      title: 'Sub Category',\n      render: (data) => data.sub_category.name,\n      key: 'sub_category',\n      filters: subCategoryFilter,\n      onFilter: (value, record) => record.sub_category.name.includes(value),\n      sorter: (a, b) => a.sub_category.name.length - b.sub_category.name.length,\n      sortOrder: sortedInfo.columnKey === 'sub_category' && sortedInfo.order,\n    },{\n      title: 'Category',\n      render: (data) => data.sub_category.category.name,\n      key: 'category',\n      filters: categoryFilter,\n      onFilter: (value, record) => record.sub_category.category.name.includes(value),\n      sorter: (a, b) => a.sub_category.category.name.length - b.sub_category.category.name.length,\n      sortOrder: sortedInfo.columnKey === 'category' && sortedInfo.order,\n    }];\n    return (\n      <div>\n        <div className=\"table-operations\">\n          <Button onClick={this.clearFilters}>Clear Sorters</Button>\n        </div>\n        <Table columns={columns} dataSource={products} onChange={this.handleChange} />\n      </div>\n    );\n  }\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"]},"metadata":{},"sourceType":"module"}