{"ast":null,"code":"var _jsxFileName = \"/home/sunny/PycharmProjects/master/frontend/src/App.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Button, Table, Modal, Form, Input, Select, message } from 'antd';\nimport 'antd/dist/antd.css';\nimport './App.css';\nconst {\n  Option\n} = Select;\nconst layout = {\n  labelCol: {\n    span: 8\n  },\n  wrapperCol: {\n    span: 16\n  }\n};\nconst tailLayout = {\n  wrapperCol: {\n    offset: 8,\n    span: 16\n  }\n};\n\nfunction handleErrors(response) {\n  if (!response.ok) throw response;\n  return response.json();\n}\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.formRef = React.createRef();\n    this.state = {\n      products: [],\n      subCategories: [],\n      categories: [],\n      visible: false\n    };\n\n    this.showModal = () => {\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.handleCancel = e => {\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.handleSubmit = values => {\n      this.setState({\n        visible: false\n      });\n      const requestOptions = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(values)\n      };\n      fetch('http://127.0.0.1:8000/product_list/', requestOptions).then(handleErrors).then(data => message.success(\"New Product Added Succesfully\"), this.setState({\n        products: [data].concat(this.state.products)\n      })).catch(error => {\n        error.json().then(body => {\n          message.error(body.non_field_errors);\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    const apiUrl = 'http://127.0.0.1:8000/product_list/';\n    fetch(apiUrl).then(handleErrors).then(data => this.setState({\n      products: data\n    })).catch(error => {\n      console.error(error);\n    });\n    const apiUrl2 = 'http://127.0.0.1:8000/sub_category_list/';\n    fetch(apiUrl2).then(handleErrors).then(data => this.setState({\n      subCategories: data\n    })).catch(error => {\n      console.error(error);\n    });\n    const apiUrl3 = 'http://127.0.0.1:8000/category_list/';\n    fetch(apiUrl3).then(handleErrors).then(data => this.setState({\n      categories: data\n    })).catch(error => {\n      console.error(error);\n    });\n  }\n\n  render() {\n    let {\n      products,\n      categories,\n      subCategories\n    } = this.state;\n    let categoryFilter = [];\n    let subCategoryFilter = [];\n    let dropDownMix = [];\n\n    if (categories) {\n      categories.map((item, key) => categoryFilter.push({\n        text: item.name,\n        value: item.name\n      }));\n    }\n\n    if (subCategories) {\n      dropDownMix = subCategories.map(item => /*#__PURE__*/React.createElement(Option, {\n        key: item.name + \", \" + item.category.name,\n        value: item.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 48\n        }\n      }, item.name + \", \" + item.category.name));\n      subCategories.map((item, key) => subCategoryFilter.push({\n        text: item.name,\n        value: item.name\n      }));\n    }\n\n    const columns = [{\n      title: 'Name',\n      dataIndex: 'name',\n      key: 'name',\n      sorter: (a, b) => {\n        return a.name.localeCompare(b.name);\n      },\n      sortDirections: ['descend', 'ascend']\n    }, {\n      title: 'Sub Category',\n      render: data => data.sub_category.name,\n      key: 'sub_category',\n      filters: subCategoryFilter,\n      onFilter: (value, record) => record.sub_category.name.includes(value),\n      sorter: (a, b) => {\n        return a.sub_category.name.localeCompare(b.sub_category.name);\n      },\n      sortDirections: ['descend', 'ascend']\n    }, {\n      title: 'Category',\n      render: data => data.sub_category.category.name,\n      key: 'category',\n      filters: categoryFilter,\n      onFilter: (value, record) => record.sub_category.category.name.includes(value),\n      sorter: (a, b) => {\n        return a.sub_category.category.name.localeCompare(b.sub_category.category.name);\n      },\n      sortDirections: ['descend', 'ascend']\n    }];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-operations\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: this.showModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }\n    }, \"Add\")), /*#__PURE__*/React.createElement(Table, {\n      columns: columns,\n      dataSource: products,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Modal, {\n      title: \"Add Product\",\n      visible: this.state.visible,\n      onCancel: this.handleCancel,\n      footer: [],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Form, Object.assign({}, layout, {\n      ref: this.formRef,\n      name: \"control-ref\",\n      onFinish: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 10\n      }\n    }), /*#__PURE__*/React.createElement(Form.Item, {\n      name: \"name\",\n      label: \"Product Name\",\n      rules: [{\n        required: true\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Form.Item, {\n      name: \"sub_category\",\n      label: \"Sub Category\",\n      rules: [{\n        required: true\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Select, {\n      allowClear: true,\n      showSearch: true,\n      placeholder: \"Sub Category\",\n      filterOption: (input, option) => option.props.key.toLowerCase().indexOf(input.toLowerCase()) >= 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 15\n      }\n    }, dropDownMix)), /*#__PURE__*/React.createElement(Form.Item, Object.assign({}, tailLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      htmlType: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 15\n      }\n    }, \"Submit\")))));\n  }\n\n}\nReactDOM.render( /*#__PURE__*/React.createElement(App, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 17\n  }\n}), document.getElementById('root'));","map":{"version":3,"sources":["/home/sunny/PycharmProjects/master/frontend/src/App.js"],"names":["React","ReactDOM","Button","Table","Modal","Form","Input","Select","message","Option","layout","labelCol","span","wrapperCol","tailLayout","offset","handleErrors","response","ok","json","App","Component","constructor","props","formRef","createRef","state","products","subCategories","categories","visible","showModal","setState","handleCancel","e","handleSubmit","values","requestOptions","method","headers","body","JSON","stringify","fetch","then","data","success","concat","catch","error","non_field_errors","componentDidMount","apiUrl","console","apiUrl2","apiUrl3","render","categoryFilter","subCategoryFilter","dropDownMix","map","item","key","push","text","name","value","category","id","columns","title","dataIndex","sorter","a","b","localeCompare","sortDirections","sub_category","filters","onFilter","record","includes","required","input","option","toLowerCase","indexOf","document","getElementById"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {Button, Table,Modal, Form, Input, Select,message  } from 'antd';\n\nimport 'antd/dist/antd.css' \nimport './App.css';\n\n\nconst { Option } = Select;\n\nconst layout = {\n  labelCol: { span: 8 },\n  wrapperCol: { span: 16 },\n};\n\nconst tailLayout = {\n  wrapperCol: { offset: 8, span: 16 },\n};\n\nfunction handleErrors(response) {\n  if (!response.ok) throw response;\n  return response.json();\n}\n\n\nexport default class App extends React.Component {\n  formRef = React.createRef();\n\n  constructor(props) {\n    super(props);\n  }\n\n  state = {\n    products : [],\n    subCategories : [],\n    categories : [],\n    visible: false,\n  }\n\n  componentDidMount() {\n      const apiUrl = 'http://127.0.0.1:8000/product_list/';\n      fetch(apiUrl)\n        .then(handleErrors)\n        .then((data) => \n            this.setState({\n              products: data\n        })).catch((error) => {\n          console.error(error); });\n\n      const apiUrl2 = 'http://127.0.0.1:8000/sub_category_list/';\n      fetch(apiUrl2)\n        .then(handleErrors)\n        .then((data) => \n            this.setState({\n              subCategories: data\n        })).catch((error) => {\n          console.error(error); });\n\n      const apiUrl3 = 'http://127.0.0.1:8000/category_list/';\n      fetch(apiUrl3)\n        .then(handleErrors)\n        .then((data) => \n            this.setState({\n              categories: data\n         })).catch((error) => {\n          console.error(error); });\n          \n  }\n\n  showModal = () => {\n    this.setState({\n      visible: true,\n    });\n  };\n\n\n  handleCancel = e => {\n    this.setState({\n      visible: false,\n    });\n  };\n\n  handleSubmit = values => {\n    this.setState({\n      visible: false,\n    });\n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(values)\n    };\n    fetch('http://127.0.0.1:8000/product_list/', requestOptions)\n        .then(handleErrors)\n        .then(data => \n          message.success(\"New Product Added Succesfully\"),\n          this.setState({\n            products: [data].concat(this.state.products)\n          })\n          ).catch(error => {\n            error.json().then((body) => {\n\n              message.error(body.non_field_errors);\n            });\n          \n          });\n            \n}\n\n  \n  render() {\n    \n    let { products,categories,subCategories } = this.state;\n\n    let categoryFilter = [];\n    let subCategoryFilter = [];\n    let dropDownMix = [];\n\n\n    if(categories){\n      categories.map((item, key) =>\n        categoryFilter.push(\n          { text: item.name , value: item.name },\n        ),\n      );\n    }\n\n    if(subCategories){\n     \n      dropDownMix =  subCategories.map(item => <Option key={item.name +\", \" + item.category.name} value={item.id}>{item.name +\", \" + item.category.name}</Option>);\n\n\n      subCategories.map((item, key) =>\n        subCategoryFilter.push(\n          { text: item.name , value: item.name },\n        ),\n      );\n    }\n\n\n    const columns = [{\n      title: 'Name',\n      dataIndex: 'name',\n      key: 'name',\n      sorter: (a, b) => { return a.name.localeCompare(b.name)},\n      sortDirections: ['descend', 'ascend'],\n    },  {\n      title: 'Sub Category',\n      render: (data) => data.sub_category.name,\n      key: 'sub_category',\n      filters: subCategoryFilter,\n      onFilter: (value, record) => record.sub_category.name.includes(value),\n      sorter: (a, b) => { return a.sub_category.name.localeCompare(b.sub_category.name)},\n      sortDirections: ['descend', 'ascend'],\n    },{\n      title: 'Category',\n      render: (data) => data.sub_category.category.name,\n      key: 'category',\n      filters: categoryFilter,\n      onFilter: (value, record) => record.sub_category.category.name.includes(value),\n      sorter: (a, b) => { return a.sub_category.category.name.localeCompare(b.sub_category.category.name)},\n      sortDirections: ['descend', 'ascend'],\n    }];\n    return (\n      <div>\n        <div className=\"table-operations\">\n          <Button onClick={this.showModal}>Add</Button>\n        </div>\n        <Table columns={columns} dataSource={products} />\n        <Modal\n          title=\"Add Product\"\n          visible={this.state.visible}\n          onCancel={this.handleCancel}\n          footer={[]}\n        >\n         <Form {...layout} ref={this.formRef} name=\"control-ref\" onFinish={this.handleSubmit} >\n            <Form.Item  name=\"name\" label=\"Product Name\" rules={[{ required: true }]}>\n              <Input />\n            </Form.Item>\n            <Form.Item name=\"sub_category\" label=\"Sub Category\" rules={[{ required: true }]}>\n              <Select\n                allowClear={true} showSearch placeholder=\"Sub Category\"\n                filterOption={(input, option) => option.props.key.toLowerCase().indexOf(input.toLowerCase()) >= 0}\n              >\n               {dropDownMix}\n              </Select>\n            </Form.Item>\n            <Form.Item {...tailLayout}>\n              <Button type=\"primary\" htmlType=\"submit\">\n                Submit\n              </Button>\n            \n            </Form.Item>\n            </Form>\n        </Modal>\n        \n      </div>\n    );\n  }\n}\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"]},"metadata":{},"sourceType":"module"}